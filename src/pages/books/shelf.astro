---
import Shelf from "/src/components/book_shelf/Shelf.astro";
import library from "/src/readEra_backup/library.json";
import LibraryLayout from "/src/layouts/LibraryLayout.astro";

function get_read_books(library_data: any) {
  return library_data.docs.filter((book) => book.data.doc_have_read_time > 0);
}

let readBooks = get_read_books(library);
readBooks = readBooks.sort(
  (a, b) => b["data"]["doc_have_read_time"] - a["data"]["doc_have_read_time"],
);
---

<LibraryLayout>
  <!-- <Shelf jsonBooks={readBooks.slice(0,30)}/> -->
  <Shelf jsonBooks={readBooks} />
</LibraryLayout>

<style>
  body {
    display: flex;
    justify-content: center;
    height: 100vh;
  }
</style>
